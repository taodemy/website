import Head from "next/head";
import EViewPortQuery from "@/constants/viewPortSize";
import useMediaQuery from "@/hooks/useMediaQuery";
import { GetStaticProps } from "next";
import Hero, { IHero } from "@/components/general/Hero";
import OurClients, { IOurClients } from "@/components/general/OurClients";
import WhatWeDo, { IWhatWeDo } from "@/components/general/WhatWeDo";
import FeaturedWork, { IFeaturedWork } from "../components/general/FeaturedWork";
import HowWework, { IHowWeWork } from "@/components/general/HowWeWork";
import Values, { IValue } from "@/components/general/OurValues";
import Contact, { IContact } from "@/components/general/Contact";
import LatestNews, { ILatestNews } from "@/components/general/LatestNews";

export interface Props {
  IndexPage: IIndexPage;
}

export interface IIndexPage {
  Hero: IHero;
  OurClients: IOurClients;
  WhatWeDo: IWhatWeDo;
  FeaturedWork: IFeaturedWork;
  HowWeWork: IHowWeWork;
  Values: IValue;
  Contact: IContact;
  LatestNews: ILatestNews;
}

const { DESKTOP, TABLET, PHONE } = EViewPortQuery;

export const getStaticProps: GetStaticProps<Props> = async () => {
  const res = await fetch(`${process.env.WEBSITE_API_URL}/IndexPage`);
  const data: IIndexPage = await res.json();

  return {
    props: {
      IndexPage: data,
    },
  };
};

export default function Home({ IndexPage }: Props) {
  const isDesktopSize = useMediaQuery(DESKTOP);
  const isTabletSize = useMediaQuery(TABLET);
  const isPhoneSize = useMediaQuery(PHONE);

  return (
    <>
      <Head>
        <title>Taodemy Website</title>
        <meta name="description" content="Generated by Taodemy" />
      </Head>
      <main>
        <Hero {...IndexPage.Hero} />
        <OurClients {...IndexPage.OurClients} />
        <WhatWeDo {...IndexPage.WhatWeDo} />
        <FeaturedWork {...IndexPage.FeaturedWork} />
        <HowWework {...IndexPage.HowWeWork} />
        <Values {...IndexPage.Values} />
        <Contact {...IndexPage.Contact} />
        <LatestNews {...IndexPage.LatestNews} />
      </main>
    </>
  );
}
